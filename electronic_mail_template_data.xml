<?xml version="1.0"?>
<!-- This file is part pyme module for Tryton.
The COPYRIGHT file at the top level of this repository contains the full copyright notices and license terms. -->
<tryton>
    <data noupdate="1" skiptest="1">
        <!-- Mailbox -->
        <record model="electronic.mail.mailbox" id="electronic_mail_mailbox_send">
            <field name="name">Enviado</field>
        </record>
        <record model="electronic.mail.mailbox" id="electronic_mail_mailbox_draft">
            <field name="name">Borrador</field>
        </record>
        <record model="electronic.mail.mailbox" id="electronic_mail_mailbox_error">
            <field name="name">Error</field>
        </record>
        <record model="electronic.mail.mailbox" id="electronic_mail_mailbox_outbox">
            <field name="name">Salida</field>
        </record>

        <!-- Electroni Mail Template -->
        <!-- Party -->
        <record model="electronic.mail.template" id="party_email_template">
            <field name="name">Send party email</field>
            <field name="from_">user@demo_server.com</field>
            <field name="to">${','.join([x.email for x in record.addresses if x.email]) or record.get_mechanism('email') or ''}</field>
            <field name="subject">${record.name}</field>
            <field name="model" search="[('model', '=', 'party.party')]"/>
            <field name="language">${record.lang and record.lang.code or 'es_ES'}</field>
            <field name="plain">${record.name}

Dear Mr./Ms.,

Sincerely,</field>
            <field name="html">&lt;h2&gt;${record.name}&lt;/h2&gt;

&lt;p&gt;Dear Mr./Ms.,&lt;/p&gt;

&lt;p&gt;Sincerely,&lt;/p&gt;</field>
            <field name="engine">genshi</field>
            <field name="signature" eval="True"/>
        </record>

        <record model="electronic.mail.template" id="party_pending_payments_email_template">
            <field name="name">Send overdue payments email</field>
            <field name="from_">user@demo_server.com</field>
            <field name="to">${','.join([x.email for x in record.addresses if x.email]) or record.get_mechanism('email') or ''}</field>
            <field name="subject">Overdue payments of ${record.name}</field>
            <field name="model" search="[('model', '=', 'party.party')]"/>
            <field name="language">${record.lang and record.lang.code or 'es_ES'}</field>
            <field name="plain">Dear Mr./Ms. ${record.name},

This is the list of overdue payments of ${record.name}:

Date        Amount   Document  Description
#for line in record.receivable_lines
${str(line.maturity_date)[8:]}-${str(line.maturity_date)[5:7]}-${str(line.maturity_date)[:4]} ${' '*(8-len(str(line.debit-line.credit)))} ${line.debit-line.credit}€  ${line.origin and getattr(line.origin, 'rec_name', False) and line.origin.rec_name or ''} ${line.description}
#end
#for line in record.payable_lines
${str(line.maturity_date)[8:]}-${str(line.maturity_date)[5:7]}-${str(line.maturity_date)[:4]} ${' '*(8-len(str(line.debit-line.credit)))} ${line.debit-line.credit}€  ${line.origin and getattr(line.origin, 'rec_name', False) and line.origin.rec_name or ''} ${line.description}
#end

Total debt is ${record.receivable-record.payable}€
Total overdue debt is ${record.receivable_today-record.payable_today}€

We would appreciate checked this information with your accounting department and to make overdue payments as soon as possible.

Sincerely,</field>
            <field name="html">&lt;p&gt;Dear Mr./Ms. ${record.name},&lt;/p&gt;

&lt;p&gt;This is the list of overdue payments of ${record.name}:&lt;/p&gt;

&lt;table cellpadding="5"&gt;
&lt;tr&gt;&lt;td&gt;Date&lt;/td&gt;&lt;td&gt;Amount&lt;/td&gt;&lt;td&gt;Document&lt;/td&gt;&lt;td&gt;Description&lt;/td&gt;&lt;/tr&gt;
#for line in record.receivable_lines
&lt;tr&gt;&lt;td&gt;${str(line.maturity_date)[8:]}-${str(line.maturity_date)[5:7]}-${str(line.maturity_date)[:4]} ${' '*(8-len(str(line.debit-line.credit)))}&lt;/td&gt;&lt;td align="right"&gt;${line.debit-line.credit}€&lt;/td&gt;&lt;td&gt;${line.origin and getattr(line.origin, 'rec_name', False) and line.origin.rec_name or ''}&lt;/td&gt;&lt;td&gt;${line.description}&lt;/td&gt;&lt;/tr&gt;
#end
#for line in record.payable_lines
&lt;tr&gt;&lt;td&gt;${str(line.maturity_date)[8:]}-${str(line.maturity_date)[5:7]}-${str(line.maturity_date)[:4]} ${' '*(8-len(str(line.debit-line.credit)))}&lt;/td&gt;&lt;td align="right"&gt;${line.debit-line.credit}€&lt;/td&gt;&lt;td&gt;${line.origin and getattr(line.origin, 'rec_name', False) and line.origin.rec_name or ''}&lt;/td&gt;&lt;td&gt;${line.description}&lt;/td&gt;&lt;/tr&gt;
#end
&lt;/table&gt;

&lt;p&gt;Total debt is ${record.receivable-record.payable}€&lt;/p&gt;

&lt;p&gt;Total overdue debt is ${record.receivable_today-record.payable_today}€&lt;/p&gt;

&lt;p&gt;We would appreciate checked this information with your accounting department and to make overdue payments as soon as possible.&lt;/p&gt;

&lt;p&gt;Sincerely,&lt;/p&gt;</field>
            <field name="engine">genshi</field>
            <field name="signature" eval="True"/>
        </record>

        <!-- Contact / address -->
        <record model="electronic.mail.template" id="contact_email_template">
            <field name="name">Send contact email</field>
            <field name="from_">user@demo_server.com</field>
            <field name="to">${record.email or record.party.get_mechanism('email') or ''}</field>
            <field name="subject">${record.name}</field>
            <field name="model" search="[('model', '=', 'party.address')]"/>
            <field name="language">${record.party.lang and record.party.lang.code or 'es_ES'}</field>
            <field name="plain">${record.name}

Dear Mr./Ms.,

Sincerely,</field>
            <field name="html">&lt;h2&gt;${record.name}&lt;/h2&gt;

&lt;p&gt;Dear Mr./Ms.,&lt;/p&gt;

&lt;p&gt;Sincerely,&lt;/p&gt;</field>
            <field name="engine">genshi</field>
            <field name="signature" eval="True"/>
        </record>

        <!-- Invoice -->
        <record model="electronic.mail.template" id="invoice_email_template">
            <field name="name">Send invoice email</field>
            <field name="from_">user@demo_server.com</field>
            <field name="to">${record.invoice_address.email or record.party.get_mechanism('email') or ''}</field>
            <field name="subject">${record.state == 'draft' and 'Quotation' or 'Invoice'}${record.state == 'validated' and ' ProForma' or ''} ${record.number or record.party.name}</field>
            <field name="model" search="[('model', '=', 'account.invoice')]"/>
            <field name="language">${record.party.lang and record.party.lang.code or 'es_ES'}</field>
            <field name="plain">Dear Mr./Ms. ${record.invoice_address.name or ''},

#if record.state == 'draft'
Attached we send the requested quotation${record.description and ' concerning "'+record.description+'"' or ''}.
#end
#if record.state == 'validated'
Attached we send the ProForma invoice${record.description and ' concerning "'+record.description+'"' or ''}.
#end
#if record.state not in ['draft', 'validated']
Attached we send the invoice dated ${str(record.invoice_date)[8:]}-${str(record.invoice_date)[5:7]}-${str(record.invoice_date)[:4]} and number ${record.number}${record.description and ', concerning "'+record.description+'"' or ''}.
#end

The document is in PDF format. To read it correctly you must have installed a PDF reader program (Adobe Acrobat Reader or similar) on your computer.

If you want any further clarification you can contact by e-mail to ${record.company.party.get_mechanism('email') or 'user@demo_server.com'}.

Sincerely,</field>
            <field name="html">&lt;p&gt;Dear Mr./Ms. ${record.invoice_address.name or ''},&lt;/p&gt;

#if record.state == 'draft'
&lt;p&gt;Attached we send the requested quotation${record.description and ' concerning "'+record.description+'"' or ''}.&lt;/p&gt;
#end
#if record.state == 'validated'
&lt;p&gt;Attached we send the ProForma invoice${record.description and ' concerning "'+record.description+'"' or ''}.&lt;/p&gt;
#end
#if record.state not in ['draft', 'validated']
&lt;p&gt;Attached we send the invoice dated ${str(record.invoice_date)[8:]}-${str(record.invoice_date)[5:7]}-${str(record.invoice_date)[:4]} and number ${record.number}${record.description and ', concerning "'+record.description+'"' or ''}.&lt;/p&gt;
#end

&lt;p&gt;The document is in PDF format. To read it correctly you must have installed a PDF reader program (Adobe Acrobat Reader or similar) on your computer.&lt;/p&gt;

&lt;p&gt;If you want any further clarification you can contact by e-mail to ${record.company.party.get_mechanism('email') or 'user@demo_server.com'}.&lt;/p&gt;

&lt;p&gt;Sincerely,&lt;/p&gt;</field>
            <field name="engine">genshi</field>
            <field name="signature" eval="True"/>
        </record>
    </data>
    <record model="electronic.mail.template.ir.action.report" id="invoice_email_template_report">
        <field name="template" ref="invoice_email_template"/>
        <field name="report" ref="account_invoice.report_invoice"/>
    </record>

    <!-- Sale -->
    <data depends="sale" noupdate="1" skiptest="1">
        <record model="electronic.mail.template" id="sale_email_template">
            <field name="name">Send sale email</field>
            <field name="from_">user@demo_server.com</field>
            <field name="to">${record.invoice_address.email or record.party.get_mechanism('email') or ''}</field>
            <field name="subject">${record.state in ['draft','quotation'] and 'Quotation' or 'Order'} ${record.reference or record.party.name}</field>
            <field name="model" search="[('model', '=', 'sale.sale')]"/>
            <field name="language">${record.party.lang and record.party.lang.code or 'es_ES'}</field>
            <field name="plain">Dear Mr./Ms. ${record.invoice_address and record.invoice_address.name or ''},

#if record.state == 'draft'
Attached we send the requested quotation${record.description and ' concerning "'+record.description+'"' or ''}.
#end
#if record.state == 'quotation'
Attached we send the requested quotation${record.description and ' concerning "'+record.description+'"' or ''} with reference ${record.reference}.
#end
#if record.state not in ['draft', 'quotation']
Attached we send the order${record.description and ' concerning "'+record.description+'"' or ''} dated ${str(record.sale_date)[8:]}-${str(record.sale_date)[5:7]}-${str(record.sale_date)[:4]} with reference ${record.reference}.
#end

#if record.lines
  Qty Product
  #for line in record.lines
  #if line.type == 'line'
  ${line.quantity or ''} ${line.description or ''} 
  #end
  #end
#end

The document is in PDF format. To read it correctly you must have installed a PDF reader program (Adobe Acrobat Reader or similar) on your computer.

If you want any further clarification you can contact by e-mail to ${record.company.party.get_mechanism('email') or 'user@demo_server.com'}.

Sincerely,</field>
            <field name="html">&lt;p&gt;Dear Mr./Ms. ${record.invoice_address and record.invoice_address.name or ''},&lt;/p&gt;

#if record.state == 'draft'
&lt;p&gt;Attached we send the requested quotation${record.description and ' concerning "'+record.description+'"' or ''}.&lt;/p&gt;
#end
#if record.state == 'quotation'
&lt;p&gt;Attached we send the requested quotation${record.description and ' concerning "'+record.description+'"' or ''} with reference ${record.reference}.&lt;/p&gt;
#end
#if record.state not in ['draft', 'quotation']
&lt;p&gt;Attached we send the order${record.description and ' concerning "'+record.description+'"' or ''} dated ${str(record.sale_date)[8:]}-${str(record.sale_date)[5:7]}-${str(record.sale_date)[:4]} with reference ${record.reference}.&lt;/p&gt;
#end

&lt;table class="table table-condensed" cellpadding="3" width="100%"&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Quantity&lt;/th&gt;
      &lt;th&gt;Product&lt;/th&gt;
      &lt;th&gt;Price&lt;/th&gt;
      &lt;th&gt;Total&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
  #for line in record.lines
    &lt;tr&gt;
      &lt;td&gt;${line.quantity or ''}&lt;/td&gt;
      &lt;td&gt;${line.description or ''}&lt;/td&gt;
      &lt;td style="text-align: right; color:#006699;"&gt;${line.unit_price and round(line.unit_price, 2) or ''}&lt;/td&gt;
      &lt;td style="text-align: right; color:#006699;"&gt;${line.amount or ''}&lt;/td&gt;
    &lt;/tr&gt;
  #end
    &lt;tr&gt;
      &lt;td colspan="4" style="text-align: right; color:#006699;"&gt;
        &lt;hr/&gt;
          &lt;ul style="list-style: none";&gt;
            &lt;li&gt;&lt;strong&gt;Amount:&lt;/strong&gt; ${record.untaxed_amount}&lt;/li&gt;
            &lt;li&gt;&lt;strong&gt;Taxes:&lt;/strong&gt; ${record.tax_amount}&lt;/li&gt;
            &lt;li&gt;&lt;strong&gt;Total:&lt;/strong&gt; ${record.total_amount}&lt;/li&gt;
          &lt;/ul&gt;
      &lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;The document is in PDF format. To read it correctly you must have installed a PDF reader program (Adobe Acrobat Reader or similar) on your computer.&lt;/p&gt;

&lt;p&gt;If you want any further clarification you can contact by e-mail to ${record.company.party.get_mechanism('email') or 'user@demo_server.com'}.&lt;/p&gt;

&lt;p&gt;Sincerely,&lt;/p&gt;</field>
            <field name="engine">genshi</field>
            <field name="signature" eval="True"/>
        </record>
        <record model="electronic.mail.template.ir.action.report" id="sale_email_template_report">
            <field name="template" ref="sale_email_template"/>
            <field name="report" ref="sale.report_sale"/>
        </record>
    </data>


    <!-- Purchase -->
    <data depends="purchase" noupdate="1" skiptest="1">
        <record model="electronic.mail.template" id="purchase_email_template">
            <field name="name">Send purchase email</field>
            <field name="from_">user@demo_server.com</field>
            <field name="to">${record.invoice_address.email or record.party.get_mechanism('email') or ''}</field>
            <field name="subject">Purchase ${record.state in ['draft','quotation'] and 'Request' or 'Order'} ${record.reference or record.party.name}</field>
            <field name="model" search="[('model', '=', 'purchase.purchase')]"/>
            <field name="language">${record.party.lang and record.party.lang.code or 'es_ES'}</field>
            <field name="plain">Dear Mr./Ms. ${record.invoice_address and record.invoice_address.name or ''},

#if record.state == 'draft'
Attached we send the purchase request${record.description and ' concerning "'+record.description+'"' or ''}.
#end
#if record.state == 'quotation'
Attached we send the purchase request${record.description and ' concerning "'+record.description+'"' or ''} with reference ${record.reference}.
#end
#if record.state not in ['draft', 'quotation']
Attached we send the purchase order${record.description and ' concerning "'+record.description+'"' or ''} dated ${str(record.purchase_date)[8:]}-${str(record.purchase_date)[5:7]}-${str(record.purchase_date)[:4]} with reference ${record.reference}.
#end

#if record.lines
  Qty Product
  #for line in record.lines
  #if line.type == 'line'
  ${line.quantity or ''} ${line.description or ''} 
  #end
  #end
#end

The document is in PDF format. To read it correctly you must have installed a PDF reader program (Adobe Acrobat Reader or similar) on your computer.

If you want any further clarification you can contact by e-mail to ${record.company.party.get_mechanism('email') or 'user@demo_server.com'}.

Sincerely,</field>
            <field name="html">&lt;p&gt;Dear Mr./Ms. ${record.invoice_address and record.invoice_address.name or ''},&lt;/p&gt;

#if record.state == 'draft'
&lt;p&gt;Attached we send the purchase request${record.description and ' concerning "'+record.description+'"' or ''}.&lt;/p&gt;
#end
#if record.state == 'quotation'
&lt;p&gt;Attached we send the purchase request${record.description and ' concerning "'+record.description+'"' or ''} with reference ${record.reference}.&lt;/p&gt;
#end
#if record.state not in ['draft', 'quotation']
&lt;p&gt;Attached we send the purchase order${record.description and ' concerning "'+record.description+'"' or ''} dated ${str(record.purchase_date)[8:]}-${str(record.purchase_date)[5:7]}-${str(record.purchase_date)[:4]} with reference ${record.reference}.&lt;/p&gt;
#end

&lt;table class="table table-condensed" cellpadding="3" width="100%"&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Quantity&lt;/th&gt;
      &lt;th&gt;Product&lt;/th&gt;
      &lt;th&gt;Price&lt;/th&gt;
      &lt;th&gt;Total&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
  #for line in record.lines
    &lt;tr&gt;
      &lt;td&gt;${line.quantity or ''}&lt;/td&gt;
      &lt;td&gt;${line.description or ''}&lt;/td&gt;
      &lt;td style="text-align: right; color:#006699;"&gt;${line.unit_price and round(line.unit_price, 2) or ''}&lt;/td&gt;
      &lt;td style="text-align: right; color:#006699;"&gt;${line.amount or ''}&lt;/td&gt;
    &lt;/tr&gt;
  #end
    &lt;tr&gt;
      &lt;td colspan="4" style="text-align: right; color:#006699;"&gt;
        &lt;hr/&gt;
          &lt;ul style="list-style: none";&gt;
            &lt;li&gt;&lt;strong&gt;Amount:&lt;/strong&gt; ${record.untaxed_amount}&lt;/li&gt;
            &lt;li&gt;&lt;strong&gt;Taxes:&lt;/strong&gt; ${record.tax_amount}&lt;/li&gt;
            &lt;li&gt;&lt;strong&gt;Total:&lt;/strong&gt; ${record.total_amount}&lt;/li&gt;
          &lt;/ul&gt;
      &lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;The document is in PDF format. To read it correctly you must have installed a PDF reader program (Adobe Acrobat Reader or similar) on your computer.&lt;/p&gt;

&lt;p&gt;If you want any further clarification you can contact by e-mail to ${record.company.party.get_mechanism('email') or 'user@demo_server.com'}.&lt;/p&gt;

&lt;p&gt;Sincerely,&lt;/p&gt;</field>
            <field name="engine">genshi</field>
            <field name="signature" eval="True"/>
        </record>
        <record model="electronic.mail.template.ir.action.report" id="purchase_email_template_report">
            <field name="template" ref="purchase_email_template"/>
            <field name="report" ref="purchase.report_purchase"/>
        </record>
    </data>
</tryton>
